# config validation - https://config.travis-ci.com/explore
language: swift
os: osx
osx_image: xcode11.2
xcode_sdk: iphonesimulator13.2.2
cache: bundler
branches:
  only:
    - /.*/
before_install: source ./scripts/install_certs_repo_deploy_key.sh
before_script: echo -e "Host *\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
jobs:
  include:
  # - stage: Tests
  #   name: Unit Tests
  #   script: fastlane unit_test

  # - stage: Tests
  #   name: UI Tests
  #   script: fastlane ui_test

  - stage: App Distribution
    name: Firebase
    if: branch =~ /^(master|release\/[0-9]\.[0-9]\.[0-9])/
    script: fastlane firebase_distribution
